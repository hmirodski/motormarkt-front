<app-menu></app-menu>

<div class="container ">
    <table class="table margin">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Referencia</th>
            <th scope="col">Pago</th>
            <th scope="col">Precio Total</th>
            <th scope="col">Cliente</th>
            <th scope="col">Fecha</th>
            <th scope="col">Estado</th>
          </tr>
        </thead>
        <tbody>  
          <tr *ngFor="let order of arrOrders()" [routerLink]="['/admin/orders', order.id ? order.id : '']">
            <th scope="row">{{ order.id || 'N/A' }}</th>
            <td>{{ order.reference || 'N/A' }}</td>
            <td>{{ order.payment || 'N/A' }}</td>
            <td>{{ order.total_price ? (order.total_price + ' €') : 'N/A' }}</td>
            <td>{{ order.user?.email || 'Usuario desconocido' }}</td>
            <td>{{ order.created_at ? (order.created_at | date:'yyyy-MM-dd HH:mm:ss') : 'N/A' }}</td>
            <td><span class="badge badge-warning" style="background-color: {{ order.current_state?.color || '#999999' }};">{{ order.current_state?.name || 'Desconocido' }}</span></td>
          </tr>
          <tr *ngIf="arrOrders().length === 0">
            <td colspan="7" class="text-center py-3">No hay pedidos para mostrar</td>
          </tr>
        </tbody>
    </table>
  
    <nav aria-label="Navegación de páginas" class="mt-3 d-flex justify-content-between align-items-center">
      <div>
        <span class="mr-2">Página {{ currentPage }} de {{ getTotalPages() }}</span>
        <span class="text-muted">| Mostrando {{ arrOrders().length }} de {{ totalItems }} pedidos</span>
      </div>
      <ul class="pagination mb-0">
        <li class="page-item" [class.disabled]="currentPage === 1">
          <button class="page-link" (click)="prevPage()" [disabled]="currentPage === 1">Anterior</button>
        </li>
        <li class="page-item" [class.disabled]="currentPage === getTotalPages()">
          <button class="page-link" (click)="nextPage()" [disabled]="currentPage === getTotalPages()">Siguiente</button>
        </li>
      </ul>
    </nav>
</div>
